import React, { useEffect, useState } from 'react';
import { TouchableOpacity, TouchableHighlight, TouchableWithoutFeedback, Modal, SafeAreaView, } from 'react-native';
import WebView from 'react-native-webview';
import Header from './Header';
import twitter from '../client';
function TWLoginButton(props) {
    const [isVisible, setVisible] = useState(false);
    const [authURL, setAuthURL] = useState('');
    const [token, setToken] = useState({ oauth_token: '', oauth_token_secret: '' });
    let Component;
    switch (props.type) {
        case 'TouchableOpacity':
            Component = TouchableOpacity;
            break;
        case 'TouchableHighlight':
            Component = TouchableHighlight;
            break;
        case 'TouchableWithoutFeedback':
            Component = TouchableWithoutFeedback;
            break;
        default:
            console.warn('TWLoginButton type must be TouchableOpacity or TouchableHighlight or TouchableWithoutFeedback');
            return null;
    }
    const onButtonPress = async (e) => {
        await props.onPress(e);
        try {
            const loginURL = await twitter.getLoginUrl(props.callbackUrl);
            setAuthURL(loginURL);
        }
        catch (err) {
            console.warn(`[getLoginUrl failed] ${err}`);
        }
    };
    const onClosePress = (e) => {
        setVisible(false);
        props.onClose(e);
    };
    const onNavigationStateChange = async (webViewState) => {
        const match = webViewState.url.match(/\?oauth_token=.+&oauth_verifier=(.+)/);
        if (match && match.length > 0) {
            setVisible(false);
            try {
                const response = await twitter.getAccessToken(match[1]);
                setToken(response);
            }
            catch (err) {
                console.warn(`[getAccessToken failed] ${err}`);
                props.onError(err);
            }
        }
    };
    useEffect(() => {
        if (authURL !== '') {
            setVisible(true);
        }
    }, [authURL]);
    useEffect(() => {
        if (!isVisible) {
            setAuthURL('');
        }
    }, [isVisible]);
    useEffect(() => {
        if (token && token.oauth_token && token.oauth_token_secret) {
            props.onGetAccessToken(token);
            const options = {
                include_entities: false,
                skip_status: true,
                include_email: true,
            };
            twitter.api('GET', 'account/verify_credentials.json', options).then((response) => {
                props.onSuccess(response);
            }).catch((err) => { props.onError(err); });
        }
    }, [token]);
    return (<Component {...props} onPress={onButtonPress}>
      {props.children}
      <Modal visible={isVisible} animationType="slide" onRequestClose={() => { }}>
        <SafeAreaView style={{ flex: 1, backgroundColor: props.headerColor }}>
          {props.renderHeader ? props.renderHeader({ onClose: onClosePress })
        : <Header headerColor={props.headerColor} onClose={onClosePress} closeText={props.closeText}/>}
          <WebView source={{ uri: authURL }} onNavigationStateChange={onNavigationStateChange}/>
        </SafeAreaView>
      </Modal>
    </Component>);
}
TWLoginButton.defaultProps = {
    type: 'TouchableOpacity',
    headerColor: '#f7f7f7',
    callbackUrl: null,
    closeText: 'close',
    onPress: () => { },
    onGetAccessToken: () => { },
    onClose: () => { },
    onError: () => { },
    renderHeader: null,
    children: null,
};
export default TWLoginButton;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnV0dG9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0NvbXBvbmVudHMvQnV0dG9uLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDbkQsT0FBTyxFQUNMLGdCQUFnQixFQUNoQixrQkFBa0IsRUFDbEIsd0JBQXdCLEVBQ3hCLEtBQUssRUFDTCxZQUFZLEdBQ2IsTUFBTSxjQUFjLENBQUM7QUFHdEIsT0FBTyxPQUFPLE1BQU0sc0JBQXNCLENBQUM7QUFHM0MsT0FBTyxNQUFNLE1BQU0sVUFBVSxDQUFDO0FBRzlCLE9BQU8sT0FBTyxNQUFNLFdBQVcsQ0FBQztBQWtCaEMsU0FBUyxhQUFhLENBQUMsS0FBWTtJQUNqQyxNQUFNLENBQUMsU0FBUyxFQUFFLFVBQVUsQ0FBQyxHQUFHLFFBQVEsQ0FBVSxLQUFLLENBQUMsQ0FBQztJQUN6RCxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLFFBQVEsQ0FBUyxFQUFFLENBQUMsQ0FBQztJQUNuRCxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBYyxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUUsa0JBQWtCLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUU3RixJQUFJLFNBQVMsQ0FBQztJQUNkLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRTtRQUNsQixLQUFLLGtCQUFrQjtZQUNyQixTQUFTLEdBQUcsZ0JBQWdCLENBQUM7WUFDN0IsTUFBTTtRQUNSLEtBQUssb0JBQW9CO1lBQ3ZCLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQztZQUMvQixNQUFNO1FBQ1IsS0FBSywwQkFBMEI7WUFDN0IsU0FBUyxHQUFHLHdCQUF3QixDQUFDO1lBQ3JDLE1BQU07UUFDUjtZQUNFLE9BQU8sQ0FBQyxJQUFJLENBQUMsK0ZBQStGLENBQUMsQ0FBQztZQUM5RyxPQUFPLElBQUksQ0FBQztLQUNmO0lBRUQsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLENBQU0sRUFBaUIsRUFBRTtRQUNwRCxNQUFNLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkIsSUFBSTtZQUNGLE1BQU0sUUFBUSxHQUFHLE1BQU0sT0FBTyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDOUQsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3RCO1FBQUMsT0FBTyxHQUFHLEVBQUU7WUFDWixPQUFPLENBQUMsSUFBSSxDQUFDLHdCQUF3QixHQUFHLEVBQUUsQ0FBQyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFNLEVBQUUsRUFBRTtRQUM5QixVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQixDQUFDLENBQUM7SUFFRixNQUFNLHVCQUF1QixHQUFHLEtBQUssRUFBRSxZQUFpQixFQUFFLEVBQUU7UUFDMUQsTUFBTSxLQUFLLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsc0NBQXNDLENBQUMsQ0FBQztRQUU3RSxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUM3QixVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7WUFHbEIsSUFBSTtnQkFDRixNQUFNLFFBQVEsR0FBRyxNQUFNLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hELFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNwQjtZQUFDLE9BQU8sR0FBRyxFQUFFO2dCQUNaLE9BQU8sQ0FBQyxJQUFJLENBQUMsMkJBQTJCLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBRS9DLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDcEI7U0FDRjtJQUNILENBQUMsQ0FBQztJQUVGLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixJQUFJLE9BQU8sS0FBSyxFQUFFLEVBQUU7WUFDbEIsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2xCO0lBQ0gsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUVkLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2QsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ2hCO0lBQ0gsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUVoQixTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLFdBQVcsSUFBSSxLQUFLLENBQUMsa0JBQWtCLEVBQUU7WUFDMUQsS0FBSyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTlCLE1BQU0sT0FBTyxHQUFHO2dCQUNkLGdCQUFnQixFQUFFLEtBQUs7Z0JBQ3ZCLFdBQVcsRUFBRSxJQUFJO2dCQUNqQixhQUFhLEVBQUUsSUFBSTthQUNwQixDQUFDO1lBRUYsT0FBTyxDQUFDLEdBQUcsQ0FBYyxLQUFLLEVBQUUsaUNBQWlDLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7Z0JBQzVGLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDNUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBRVosT0FBTyxDQUNMLENBQUMsU0FBUyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQzNDO01BQUEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUNmO01BQUEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FDekU7UUFBQSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsZUFBZSxFQUFFLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUNuRTtVQUFBLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQztRQUNqRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsRUFBRyxDQUNqRztVQUFBLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxFQUN0RjtRQUFBLEVBQUUsWUFBWSxDQUNoQjtNQUFBLEVBQUUsS0FBSyxDQUNUO0lBQUEsRUFBRSxTQUFTLENBQUMsQ0FDYixDQUFDO0FBQ0osQ0FBQztBQUVELGFBQWEsQ0FBQyxZQUFZLEdBQUc7SUFDM0IsSUFBSSxFQUFFLGtCQUFrQjtJQUN4QixXQUFXLEVBQUUsU0FBUztJQUN0QixXQUFXLEVBQUUsSUFBSTtJQUNqQixTQUFTLEVBQUUsT0FBTztJQUNsQixPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUNsQixnQkFBZ0IsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQzNCLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQ2xCLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQ2xCLFlBQVksRUFBRSxJQUFJO0lBQ2xCLFFBQVEsRUFBRSxJQUFJO0NBQ2YsQ0FBQztBQUVGLGVBQWUsYUFBYSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBUb3VjaGFibGVPcGFjaXR5LFxuICBUb3VjaGFibGVIaWdobGlnaHQsXG4gIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayxcbiAgTW9kYWwsXG4gIFNhZmVBcmVhVmlldyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuLyogbnBtICovXG5pbXBvcnQgV2ViVmlldyBmcm9tICdyZWFjdC1uYXRpdmUtd2Vidmlldyc7XG5cbi8qIGNvbXBvbmVudHMgKi9cbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9IZWFkZXInO1xuXG4vKiBjbGllbnQgKi9cbmltcG9ydCB0d2l0dGVyIGZyb20gJy4uL2NsaWVudCc7XG5cbmltcG9ydCB7IEVycm9yUmVzcG9uc2UsIEFjY2Vzc1Rva2VuLCBUd2l0dGVyVXNlciB9IGZyb20gJy4uL3R5cGVzJztcblxudHlwZSBQcm9wcyA9IHtcbiAgdHlwZTogJ1RvdWNoYWJsZU9wYWNpdHknIHwgJ1RvdWNoYWJsZUhpZ2hsaWdodCcgfCAnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJztcbiAgaGVhZGVyQ29sb3I6IHN0cmluZztcbiAgY2FsbGJhY2tVcmw6IHN0cmluZztcbiAgY2xvc2VUZXh0OiBzdHJpbmc7XG4gIG9uUHJlc3M6IChlOiBhbnkpID0+IHZvaWQ7XG4gIG9uR2V0QWNjZXNzVG9rZW46ICh0b2tlbjogQWNjZXNzVG9rZW4pID0+IHZvaWQ7XG4gIG9uQ2xvc2U6IChlOiBhbnkpID0+IHZvaWQ7XG4gIG9uU3VjY2VzczogKHVzZXI6IFR3aXR0ZXJVc2VyKSA9PiB2b2lkO1xuICBvbkVycm9yOiAoZTogRXJyb3JSZXNwb25zZSkgPT4gdm9pZDtcbiAgcmVuZGVySGVhZGVyOiAocHJvcHM6IGFueSkgPT4gUmVhY3QuUmVhY3RFbGVtZW50PHt9PjtcbiAgY2hpbGRyZW46IGFueTtcbn1cblxuZnVuY3Rpb24gVFdMb2dpbkJ1dHRvbihwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgW2lzVmlzaWJsZSwgc2V0VmlzaWJsZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFthdXRoVVJMLCBzZXRBdXRoVVJMXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCBbdG9rZW4sIHNldFRva2VuXSA9IHVzZVN0YXRlPEFjY2Vzc1Rva2VuPih7IG9hdXRoX3Rva2VuOiAnJywgb2F1dGhfdG9rZW5fc2VjcmV0OiAnJyB9KTtcblxuICBsZXQgQ29tcG9uZW50O1xuICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcbiAgICBjYXNlICdUb3VjaGFibGVPcGFjaXR5JzpcbiAgICAgIENvbXBvbmVudCA9IFRvdWNoYWJsZU9wYWNpdHk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdUb3VjaGFibGVIaWdobGlnaHQnOlxuICAgICAgQ29tcG9uZW50ID0gVG91Y2hhYmxlSGlnaGxpZ2h0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJzpcbiAgICAgIENvbXBvbmVudCA9IFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLndhcm4oJ1RXTG9naW5CdXR0b24gdHlwZSBtdXN0IGJlIFRvdWNoYWJsZU9wYWNpdHkgb3IgVG91Y2hhYmxlSGlnaGxpZ2h0IG9yIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBvbkJ1dHRvblByZXNzID0gYXN5bmMgKGU6IGFueSk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGF3YWl0IHByb3BzLm9uUHJlc3MoZSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbG9naW5VUkwgPSBhd2FpdCB0d2l0dGVyLmdldExvZ2luVXJsKHByb3BzLmNhbGxiYWNrVXJsKTtcbiAgICAgIHNldEF1dGhVUkwobG9naW5VUkwpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKGBbZ2V0TG9naW5VcmwgZmFpbGVkXSAke2Vycn1gKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25DbG9zZVByZXNzID0gKGU6IGFueSkgPT4ge1xuICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgIHByb3BzLm9uQ2xvc2UoZSk7XG4gIH07XG5cbiAgY29uc3Qgb25OYXZpZ2F0aW9uU3RhdGVDaGFuZ2UgPSBhc3luYyAod2ViVmlld1N0YXRlOiBhbnkpID0+IHtcbiAgICBjb25zdCBtYXRjaCA9IHdlYlZpZXdTdGF0ZS51cmwubWF0Y2goL1xcP29hdXRoX3Rva2VuPS4rJm9hdXRoX3ZlcmlmaWVyPSguKykvKTtcblxuICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgICAgLyogZ2V0IGFjY2VzcyB0b2tlbiAqL1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0d2l0dGVyLmdldEFjY2Vzc1Rva2VuKG1hdGNoWzFdKTtcbiAgICAgICAgc2V0VG9rZW4ocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW2dldEFjY2Vzc1Rva2VuIGZhaWxlZF0gJHtlcnJ9YCk7XG5cbiAgICAgICAgcHJvcHMub25FcnJvcihlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhdXRoVVJMICE9PSAnJykge1xuICAgICAgc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9XG4gIH0sIFthdXRoVVJMXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmlzaWJsZSkge1xuICAgICAgc2V0QXV0aFVSTCgnJyk7XG4gICAgfVxuICB9LCBbaXNWaXNpYmxlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodG9rZW4gJiYgdG9rZW4ub2F1dGhfdG9rZW4gJiYgdG9rZW4ub2F1dGhfdG9rZW5fc2VjcmV0KSB7XG4gICAgICBwcm9wcy5vbkdldEFjY2Vzc1Rva2VuKHRva2VuKTtcblxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgaW5jbHVkZV9lbnRpdGllczogZmFsc2UsXG4gICAgICAgIHNraXBfc3RhdHVzOiB0cnVlLFxuICAgICAgICBpbmNsdWRlX2VtYWlsOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgdHdpdHRlci5hcGk8VHdpdHRlclVzZXI+KCdHRVQnLCAnYWNjb3VudC92ZXJpZnlfY3JlZGVudGlhbHMuanNvbicsIG9wdGlvbnMpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHByb3BzLm9uU3VjY2VzcyhyZXNwb25zZSk7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7IHByb3BzLm9uRXJyb3IoZXJyKTsgfSk7XG4gICAgfVxuICB9LCBbdG9rZW5dKTtcblxuICByZXR1cm4gKFxuICAgIDxDb21wb25lbnQgey4uLnByb3BzfSBvblByZXNzPXtvbkJ1dHRvblByZXNzfT5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgIDxNb2RhbCB2aXNpYmxlPXtpc1Zpc2libGV9IGFuaW1hdGlvblR5cGU9XCJzbGlkZVwiIG9uUmVxdWVzdENsb3NlPXsoKSA9PiB7IH19PlxuICAgICAgICA8U2FmZUFyZWFWaWV3IHN0eWxlPXt7IGZsZXg6IDEsIGJhY2tncm91bmRDb2xvcjogcHJvcHMuaGVhZGVyQ29sb3IgfX0+XG4gICAgICAgICAge3Byb3BzLnJlbmRlckhlYWRlciA/IHByb3BzLnJlbmRlckhlYWRlcih7IG9uQ2xvc2U6IG9uQ2xvc2VQcmVzcyB9KVxuICAgICAgICAgICAgOiA8SGVhZGVyIGhlYWRlckNvbG9yPXtwcm9wcy5oZWFkZXJDb2xvcn0gb25DbG9zZT17b25DbG9zZVByZXNzfSBjbG9zZVRleHQ9e3Byb3BzLmNsb3NlVGV4dH0gLz59XG4gICAgICAgICAgPFdlYlZpZXcgc291cmNlPXt7IHVyaTogYXV0aFVSTCB9fSBvbk5hdmlnYXRpb25TdGF0ZUNoYW5nZT17b25OYXZpZ2F0aW9uU3RhdGVDaGFuZ2V9IC8+XG4gICAgICAgIDwvU2FmZUFyZWFWaWV3PlxuICAgICAgPC9Nb2RhbD5cbiAgICA8L0NvbXBvbmVudD5cbiAgKTtcbn1cblxuVFdMb2dpbkJ1dHRvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIHR5cGU6ICdUb3VjaGFibGVPcGFjaXR5JyxcbiAgaGVhZGVyQ29sb3I6ICcjZjdmN2Y3JyxcbiAgY2FsbGJhY2tVcmw6IG51bGwsXG4gIGNsb3NlVGV4dDogJ2Nsb3NlJyxcbiAgb25QcmVzczogKCkgPT4geyB9LFxuICBvbkdldEFjY2Vzc1Rva2VuOiAoKSA9PiB7IH0sXG4gIG9uQ2xvc2U6ICgpID0+IHsgfSxcbiAgb25FcnJvcjogKCkgPT4geyB9LFxuICByZW5kZXJIZWFkZXI6IG51bGwsXG4gIGNoaWxkcmVuOiBudWxsLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgVFdMb2dpbkJ1dHRvbjtcbiJdfQ==